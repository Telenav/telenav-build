#!/bin/bash

#///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#
#  Â© 2011-2021 Telenav, Inc.
#  Licensed under Apache License, Version 2.0
#
#///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

TAG=$1

if [ -z "$TAG" ]; then
    read -r -p "Release Tag? "
    TAG=$REPLY
fi

if [ -n "$TAG" ]; then
    git checkout releases || exit
    git merge --squash develop || exit
    git tag -a "$TAG" -m "Tag for release $TAG"
    git push origin --tags
    git commit -m "Merging $TAG to releases" || exit
    git push || exit
    git checkout develop || exit
fi
